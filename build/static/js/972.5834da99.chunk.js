"use strict";(self.webpackChunkquiz_app=self.webpackChunkquiz_app||[]).push([[972],{1972:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E,loader:()=>D});var n=s(3216),i=s(5475),a=s(5043),l=s(712),r=s(579),o=s(9674),c=s(4930),d=s(1051);class h extends a.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:s}=e;const n=(0,a.useId)(),i=(0,a.useRef)(null),l=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,a.useContext)(d.Q);return(0,a.useInsertionEffect)((()=>{const{width:e,height:t,top:a,left:r}=l.current;if(s||!i.current||!e||!t)return;i.current.dataset.motionPopId=n;const c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${a}px !important;\n            left: ${r}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[s]),(0,r.jsx)(h,{isPresent:s,childRef:i,sizeRef:l,children:a.cloneElement(t,{ref:i})})}const x=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:i,custom:l,presenceAffectsLayout:d,mode:h}=e;const x=(0,c.M)(m),p=(0,a.useId)(),f=(0,a.useCallback)((e=>{x.set(e,!0);for(const t of x.values())if(!t)return;i&&i()}),[x,i]),g=(0,a.useMemo)((()=>({id:p,initial:s,isPresent:n,custom:l,onExitComplete:f,register:e=>(x.set(e,!1),()=>x.delete(e))})),d?[Math.random(),f]:[n,f]);return(0,a.useMemo)((()=>{x.forEach(((e,t)=>x.set(t,!1)))}),[n]),a.useEffect((()=>{!n&&!x.size&&i&&i()}),[n]),"popLayout"===h&&(t=(0,r.jsx)(u,{isPresent:n,children:t})),(0,r.jsx)(o.t.Provider,{value:g,children:t})};function m(){return new Map}var p=s(2190),f=s(8129);const g=e=>e.key||"";function j(e){const t=[];return a.Children.forEach(e,(e=>{(0,a.isValidElement)(e)&&t.push(e)})),t}var b=s(293);const v=e=>{let{children:t,exitBeforeEnter:s,custom:n,initial:i=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:d="sync"}=e;(0,f.V)(!s,"Replace exitBeforeEnter with mode='wait'");const h=(0,a.useMemo)((()=>j(t)),[t]),u=h.map(g),m=(0,a.useRef)(!0),v=(0,a.useRef)(h),w=(0,c.M)((()=>new Map)),[y,N]=(0,a.useState)(h),[k,P]=(0,a.useState)(h);(0,b.E)((()=>{m.current=!1,v.current=h;for(let e=0;e<k.length;e++){const t=g(k[e]);u.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}}),[k,u.length,u.join("-")]);const C=[];if(h!==y){let e=[...h];for(let t=0;t<k.length;t++){const s=k[t],n=g(s);u.includes(n)||(e.splice(t,0,s),C.push(s))}return"wait"===d&&C.length&&(e=C),P(j(e)),void N(h)}const{forceRender:E}=(0,a.useContext)(p.L);return(0,r.jsx)(r.Fragment,{children:k.map((e=>{const t=g(e),s=h===k||u.includes(t);return(0,r.jsx)(x,{isPresent:s,initial:!(m.current&&!i)&&void 0,custom:s?void 0:n,presenceAffectsLayout:o,mode:d,onExitComplete:s?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach((t=>{t||(e=!1)})),e&&(null===E||void 0===E||E(),P(v.current),l&&l())},children:e},t)}))})};var w=s(184),y=(s(2502),s(9380));function N(e){let{phoneNumber:t,checkInDate:s,checkOutDate:n,numberOfGuests:i,totalPrice:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.Cab,{className:"text-green-500 text-xl"}),(0,r.jsx)("p",{children:t})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.bfZ,{className:"text-red-500 text-xl"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Check-in:",new Date(s).toLocaleDateString()]}),(0,r.jsxs)("p",{children:["Check-out:",new Date(n).toLocaleDateString()]})]})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.YXz,{className:"text-purple-500 text-xl"}),(0,r.jsxs)("p",{children:["Guests: ",i]})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.MxO,{className:"text-yellow-500 text-xl"}),(0,r.jsxs)("p",{className:"font-bold",children:["Total: $",a]})]})]})})}var k=s(1577);function P(e){let{name:t,address:s,phone:n,price:i,type:a,images:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Booked Hotel"}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.inQ,{className:"text-blue-500 text-xl"}),(0,r.jsx)("p",{className:"font-semibold",children:t})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.vq8,{className:"text-red-500 text-xl"}),(0,r.jsx)("p",{children:s})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.Cab,{className:"text-green-500 text-xl"}),(0,r.jsx)("p",{children:n})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.MxO,{className:"text-yellow-500 text-xl"}),(0,r.jsxs)("p",{children:["Price: $",i,"/night"]})]}),(0,r.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[(0,r.jsx)(w.inQ,{className:"text-purple-500 text-xl"}),(0,r.jsxs)("p",{children:["Type: ",a]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(k.FN,{showArrows:!0,showThumbs:!1,infiniteLoop:!0,className:"rounded-lg overflow-hidden",children:o.map(((e,t)=>(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:`https://hotel-booking-api-2x5aw.ondigitalocean.app/${e}`,alt:`Hotel image ${t+1}`,className:"object-cover h-64 w-full"})},t)))})})]})}var C=s(3352);function E(){const e=(0,n.LG)(),[t,s]=(0,a.useState)(""),[o,c]=(0,a.useState)({}),[d,h]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),m=((new Date).toLocaleDateString(),(0,n.Zp)()),p=(0,n.Ew)("root");(0,C.F6)(),(0,C.Xz)();(0,a.useEffect)((()=>{null===p&&m("/login")}),[p]);const f=e.bookings,g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},className:"p-6 bg-gray-50 min-h-screen",children:f?(0,r.jsx)("ul",{className:"space-y-6",children:f.map(((e,n)=>(0,r.jsxs)(l.P.li,{variants:g,className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(w.x$1,{className:"text-blue-600 text-2xl"}),(0,r.jsx)("p",{className:"font-semibold text-xl text-gray-800",children:e.userName})]}),(0,r.jsx)("div",{className:"font-semibold text-xl "+("Confirmed"===e.status?"text-green-500":"text-yellow-500"),children:e.status})]}),(0,r.jsxs)("button",{onClick:()=>(e=>{c((t=>({...t,[e]:!t[e]})))})(n),className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300",children:[(0,r.jsx)("span",{children:o[n]?"Hide Details":"Load More"}),o[n]?(0,r.jsx)(w.Ucs,{}):(0,r.jsx)(w.Vr3,{})]})]}),(0,r.jsx)(v,{children:o[n]&&(0,r.jsxs)(l.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"p-6 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsx)(N,{checkInDate:e.checkInDate,checkOutDate:e.checkOutDate,numberOfGuests:e.numberOfGuests,phoneNumber:e.phoneNumber,totalPrice:e.totalPrice})}),(0,r.jsx)("div",{children:(0,r.jsx)(P,{address:e.hotelId.address,images:e.hotelId.images,name:e.hotelId.name,phone:e.hotelId.phone,price:e.hotelId.price,type:e.hotelId.type})})]}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-800 mt-4",children:"Update Booking Status"}),(0,r.jsxs)(i.lV,{onSubmit:s=>async function(e,s){e.preventDefault();const n=new FormData(e.target),i=Object.fromEntries(n.entries());h(!0);try{const e=await fetch(`https://hotel-booking-api-2x5aw.ondigitalocean.app/bookings/${s}/update`,{method:"PATCH",body:JSON.stringify({...i,status:t}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}}),n=await e.json();if(!e.ok)throw new Error(n.message)}catch(a){throw h(!1),new Error("Field to update hotel, Please try again later.",500)}m("/admin"),h(!1)}(s,e._id),className:"h-96 p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"update",className:"block text-sm font-medium text-gray-700 mb-2",children:"Update booking status"}),(0,r.jsxs)("select",{id:"update",onChange:e=>function(e){const{value:t}=e.target;s(t)}(e),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,r.jsx)("option",{value:"",children:"Select status"}),(0,r.jsx)("option",{value:"Clear",children:"Clear"}),(0,r.jsx)("option",{value:"Booked",children:"Booked"}),(0,r.jsx)("option",{value:"Canceled",children:"Canceled"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"checkOutDate",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(w.bfZ,{className:"inline mr-2"}),"Check-out Date"]}),(0,r.jsx)("input",{id:"checkOutDate",type:"date",name:"checkOutDate",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"numberOfGuests",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(w.YXz,{className:"inline mr-2"}),"Number of Guests"]}),(0,r.jsx)("input",{id:"numberOfGuests",type:"number",required:!0,min:"1",name:"numberOfGuests",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,r.jsx)(l.P.button,{type:"submit",disabled:d,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg mt-4 transition duration-300 ease-in-out",children:d?(0,r.jsx)(y.A,{}):"Update Room Status"})]}),(0,r.jsx)("div",{className:"flex justify-end mt-4",children:(0,r.jsx)(l.P.button,{disabled:u,onClick:()=>async function(e){x(!0);try{const t=await fetch(`https://hotel-booking-api-2x5aw.ondigitalocean.app/bookings/${e}/cancel`,{method:"DELETE",headers:{Authorization:"Bearer "+p}}),s=await t.json();if(!t.ok)throw new Error(s.message)}catch(t){throw x(!1),new Error("Field to update hotel, Please try again later.",500)}m("/admin"),x(!1)}(e.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg font-semibold transition duration-300 "+(u?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),children:u?(0,r.jsx)(y.A,{}):"Delete booking"})})]})})]},n)))}):(0,r.jsx)(l.P.h1,{initial:{opacity:0},animate:{opacity:1},className:"text-2xl font-bold text-center text-gray-800",children:"Loading..."})})})}async function D(){try{const e=await fetch("https://hotel-booking-api-2x5aw.ondigitalocean.app/bookings"),t=await e.json();if(!e.ok)throw new Error(t.message);return t}catch(e){throw JSON}}}}]);
//# sourceMappingURL=972.5834da99.chunk.js.map