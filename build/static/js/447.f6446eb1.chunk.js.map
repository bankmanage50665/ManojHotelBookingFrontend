{"version":3,"file":"static/js/447.f6446eb1.chunk.js","mappings":"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","sources":["component/AddHotel.jsx"],"sourcesContent":["import { Form, useNavigate, json, useRouteLoaderData } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getUserId } from \"../middleware/getToken\";\r\n\r\nimport ImageUpload from \"../shared/component/ImageUpload\";\r\nimport LoadingComponent from \"../shared/component/LoadingComponent\";\r\n\r\nexport default function AddHoteles() {\r\n  const [isSubmiting, setIsSubmiting] = useState(null);\r\n  const [files, setFiles] = useState(null);\r\n  const navigate = useNavigate();\r\n  const userid = getUserId();\r\n  const token = useRouteLoaderData(\"root\");\r\n\r\n  useEffect(() => {\r\n    if (token === null || !token) {\r\n      navigate(\"/login\");\r\n    }\r\n  }, [token]);\r\n\r\n  function handleGetFiles(files) {\r\n    setFiles(files);\r\n  }\r\n\r\n  async function handleAddHoteles(e) {\r\n    setIsSubmiting(true);\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    const formElement = e.target.elements;\r\n    const hotelData = {\r\n      name: formElement.name.value,\r\n      address: formElement.address.value,\r\n      price: formElement.price.value,\r\n\r\n      phone: formElement.phone.value,\r\n      type: formElement.type.value,\r\n    };\r\n    formData.append(\"name\", hotelData.name);\r\n    formData.append(\"address\", hotelData.address);\r\n    formData.append(\"price\", hotelData.price);\r\n    formData.append(\"phone\", hotelData.phone);\r\n    formData.append(\"creator\", userid);\r\n    formData.append(\"type\", hotelData.type);\r\n    Array.from(files.map((img) => formData.append(\"images\", img)));\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${process.env.REACT_APP_BACKEND_URL}/hoteles/add`,\r\n        {\r\n          method: \"POST\",\r\n          body: formData,\r\n          headers: {\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        }\r\n      );\r\n\r\n      const resData = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setIsSubmiting(false);\r\n        throw json({ message: resData.message }, { status: 500 });\r\n      }\r\n    } catch (err) {\r\n      throw new Error(\"Field to adding hotel, Please try again later.\", 500);\r\n    }\r\n\r\n    navigate(\"/\");\r\n    setIsSubmiting(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h2 className=\"text-2xl font-bold text-center mb-4\">\r\n          Add your Hoteles\r\n        </h2>\r\n        <Form onSubmit={handleAddHoteles}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"name\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Hotel Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"address\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Address\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"address\"\r\n              name=\"address\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"price\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Price\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"price\"\r\n              name=\"price\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"type\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Select Type\r\n            </label>\r\n            <select id=\"type\">\r\n              <option value=\"hotel\">Hotel</option>\r\n              <option value=\"gest\">Gest house</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"phone\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Phone no\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"phone\"\r\n              name=\"phone\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <ImageUpload getAllFiles={handleGetFiles} />\r\n\r\n          <button\r\n            disabled={isSubmiting}\r\n            type=\"submit\"\r\n            className=\"w-full py-2 bg-black text-yellow-200 rounded-md hover:bg-blue-700\"\r\n          >\r\n            {isSubmiting ? <LoadingComponent /> : \"Add Hotels\"}\r\n          </button>\r\n        </Form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["AddHoteles","isSubmiting","setIsSubmiting","useState","files","setFiles","navigate","useNavigate","userid","getUserId","token","useRouteLoaderData","useEffect","_jsx","_Fragment","children","_jsxs","className","Form","onSubmit","async","e","preventDefault","formData","FormData","formElement","target","elements","hotelData","name","value","address","price","phone","type","append","Array","from","map","img","res","fetch","method","body","headers","Authorization","resData","json","ok","message","status","err","Error","htmlFor","id","ImageUpload","getAllFiles","disabled","LoadingComponent"],"sourceRoot":""}