{"version":3,"file":"static/js/447.ca479ead.chunk.js","mappings":"8NAQe,SAASA,IACtB,MAAOC,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,OACxCC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,OAC5BG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAC7BK,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,IAAmB,QAC3BC,GAAWC,EAAAA,EAAAA,UAuEjB,OAnEIT,GACFQ,EAASE,QAAQC,QAGnBC,EAAAA,EAAAA,YAAU,KACM,OAAVN,GAAmBA,GACrBJ,EAAS,SACX,GACC,CAACI,KA4DFO,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,CACGf,IAASgB,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CAACC,IAAKV,EAAUR,MAAOA,EAAOmB,QANlD,WACElB,EAAS,KACX,KAKIY,EAAAA,EAAAA,MAAA,OAAKO,UAAU,8BAA6BL,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,MAAII,UAAU,sCAAqCL,SAAC,sBAGpDF,EAAAA,EAAAA,MAACQ,EAAAA,GAAI,CAACC,SA5DZC,eAAgCC,GAC9B5B,GAAe,GACf4B,EAAEC,iBACF,MAAMC,EAAW,IAAIC,SACfC,EAAcJ,EAAEK,OAAOC,SACvBC,EAAY,CAChBC,KAAMJ,EAAYI,KAAKC,MACvBC,QAASN,EAAYM,QAAQD,MAC7BE,MAAOP,EAAYO,MAAMF,MAEzBG,MAAOR,EAAYQ,MAAMH,MACzBI,KAAMT,EAAYS,KAAKJ,OAEzBP,EAASY,OAAO,OAAQP,EAAUC,MAClCN,EAASY,OAAO,UAAWP,EAAUG,SACrCR,EAASY,OAAO,QAASP,EAAUI,OACnCT,EAASY,OAAO,QAASP,EAAUK,OACnCV,EAASY,OAAO,UAAWlC,GAC3BsB,EAASY,OAAO,OAAQP,EAAUM,MAClCE,MAAMC,KAAK1C,EAAM2C,KAAKC,GAAQhB,EAASY,OAAO,SAAUI,MAExD,IACE,MAAMC,QAAYC,MAChB,2DACA,CACEC,OAAQ,OACRC,KAAMpB,EACNqB,QAAS,CACPC,cAAe,UAAY1C,KAK3B2C,QAAgBN,EAAIO,OAE1B,IAAKP,EAAIQ,GAEP,MADAlD,EAASgD,EAAQG,UACXF,EAAAA,EAAAA,IAAK,CAAEE,QAASH,EAAQG,SAAW,CAAEC,OAAQ,KAEvD,CAAE,MAAOC,GAGP,MAFArD,EAASqD,EAAIF,SAAW,6CACxBxD,GAAe,GACT,IAAI2D,MAAM,iDAAkD,IACpE,CAEArD,EAAS,KACTN,GAAe,EACjB,EAauCmB,SAAA,EAC/BF,EAAAA,EAAAA,MAAA,OAAKO,UAAU,OAAML,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEwC,QAAQ,OACRpC,UAAU,qCAAoCL,SAC/C,gBAGDC,EAAAA,EAAAA,KAAA,SACEqB,KAAK,OACLoB,GAAG,OACHzB,KAAK,OACLZ,UAAU,+FAGdP,EAAAA,EAAAA,MAAA,OAAKO,UAAU,OAAML,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEwC,QAAQ,UACRpC,UAAU,qCAAoCL,SAC/C,aAGDC,EAAAA,EAAAA,KAAA,SACEqB,KAAK,OACLoB,GAAG,UACHzB,KAAK,UACLZ,UAAU,+FAGdP,EAAAA,EAAAA,MAAA,OAAKO,UAAU,OAAML,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEwC,QAAQ,QACRpC,UAAU,qCAAoCL,SAC/C,WAGDC,EAAAA,EAAAA,KAAA,SACEqB,KAAK,SACLoB,GAAG,QACHzB,KAAK,QACLZ,UAAU,+FAGdP,EAAAA,EAAAA,MAAA,OAAKO,UAAU,OAAML,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEwC,QAAQ,OACRpC,UAAU,qCAAoCL,SAC/C,iBAGDF,EAAAA,EAAAA,MAAA,UAAQ4C,GAAG,OAAM1C,SAAA,EACfC,EAAAA,EAAAA,KAAA,UAAQiB,MAAM,QAAOlB,SAAC,WACtBC,EAAAA,EAAAA,KAAA,UAAQiB,MAAM,OAAMlB,SAAC,sBAIzBF,EAAAA,EAAAA,MAAA,OAAKO,UAAU,OAAML,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SACEwC,QAAQ,QACRpC,UAAU,qCAAoCL,SAC/C,cAGDC,EAAAA,EAAAA,KAAA,SACEqB,KAAK,SACLoB,GAAG,QACHzB,KAAK,QACLZ,UAAU,+FAGdJ,EAAAA,EAAAA,KAAC0C,EAAAA,EAAW,CAACC,YAtIrB,SAAwB7D,GACtBC,EAASD,EACX,KAsIQkB,EAAAA,EAAAA,KAAA,UACE4C,SAAUjE,EACV0C,KAAK,SACLjB,UAAU,oEAAmEL,SAE5EpB,GAAcqB,EAAAA,EAAAA,KAAC6C,EAAAA,EAAgB,IAAM,uBAMlD,C","sources":["component/AddHotel.jsx"],"sourcesContent":["import { Form, useNavigate, json, useRouteLoaderData } from \"react-router-dom\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { getUserId } from \"../middleware/getToken\";\r\n\r\nimport ImageUpload from \"../shared/component/ImageUpload\";\r\nimport LoadingComponent from \"../shared/component/LoadingComponent\";\r\nimport Modal from \"../shared/component/Modal\";\r\n\r\nexport default function AddHoteles() {\r\n  const [isSubmiting, setIsSubmiting] = useState(null);\r\n  const [files, setFiles] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const userid = getUserId();\r\n  const token = useRouteLoaderData(\"root\");\r\n  const modelRef = useRef();\r\n\r\n \r\n\r\n  if (error) {\r\n    modelRef.current.open();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (token === null || !token) {\r\n      navigate(\"/login\");\r\n    }\r\n  }, [token]);\r\n\r\n  function handleGetFiles(files) {\r\n    setFiles(files);\r\n  }\r\n\r\n  async function handleAddHoteles(e) {\r\n    setIsSubmiting(true);\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    const formElement = e.target.elements;\r\n    const hotelData = {\r\n      name: formElement.name.value,\r\n      address: formElement.address.value,\r\n      price: formElement.price.value,\r\n\r\n      phone: formElement.phone.value,\r\n      type: formElement.type.value,\r\n    };\r\n    formData.append(\"name\", hotelData.name);\r\n    formData.append(\"address\", hotelData.address);\r\n    formData.append(\"price\", hotelData.price);\r\n    formData.append(\"phone\", hotelData.phone);\r\n    formData.append(\"creator\", userid);\r\n    formData.append(\"type\", hotelData.type);\r\n    Array.from(files.map((img) => formData.append(\"images\", img)));\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${process.env.REACT_APP_BACKEND_URL}/hoteles/add`,\r\n        {\r\n          method: \"POST\",\r\n          body: formData,\r\n          headers: {\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        }\r\n      );\r\n\r\n      const resData = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(resData.message);\r\n        throw json({ message: resData.message }, { status: 500 });\r\n      }\r\n    } catch (err) {\r\n      setError(err.message || \"Field to add hotel, Something went wrong.\");\r\n      setIsSubmiting(false);\r\n      throw new Error(\"Field to adding hotel, Please try again later.\", 500);\r\n    }\r\n\r\n    navigate(\"/\");\r\n    setIsSubmiting(false);\r\n  }\r\n\r\n  function handleClose() {\r\n    setError(null);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {error && <Modal ref={modelRef} error={error} onClose={handleClose} />}\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h2 className=\"text-2xl font-bold text-center mb-4\">\r\n          Add your Hoteles\r\n        </h2>\r\n        <Form onSubmit={handleAddHoteles}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"name\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Hotel Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"address\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Address\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"address\"\r\n              name=\"address\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"price\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Price\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"price\"\r\n              name=\"price\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"type\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Select Type\r\n            </label>\r\n            <select id=\"type\">\r\n              <option value=\"hotel\">Hotel</option>\r\n              <option value=\"gest\">Gest house</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"phone\"\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n            >\r\n              Phone no\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"phone\"\r\n              name=\"phone\"\r\n              className=\"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <ImageUpload getAllFiles={handleGetFiles} />\r\n\r\n          <button\r\n            disabled={isSubmiting}\r\n            type=\"submit\"\r\n            className=\"w-full py-2 bg-black text-yellow-200 rounded-md hover:bg-blue-700\"\r\n          >\r\n            {isSubmiting ? <LoadingComponent /> : \"Add Hotels\"}\r\n          </button>\r\n        </Form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["AddHoteles","isSubmiting","setIsSubmiting","useState","files","setFiles","error","setError","navigate","useNavigate","userid","getUserId","token","useRouteLoaderData","modelRef","useRef","current","open","useEffect","_jsxs","_Fragment","children","_jsx","Modal","ref","onClose","className","Form","onSubmit","async","e","preventDefault","formData","FormData","formElement","target","elements","hotelData","name","value","address","price","phone","type","append","Array","from","map","img","res","fetch","method","body","headers","Authorization","resData","json","ok","message","status","err","Error","htmlFor","id","ImageUpload","getAllFiles","disabled","LoadingComponent"],"sourceRoot":""}